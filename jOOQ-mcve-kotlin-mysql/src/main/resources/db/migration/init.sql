DROP DATABASE IF EXISTS mcve;

CREATE DATABASE mcve;
USE mcve;

CREATE TABLE mcve.test (
  id INT NOT NULL AUTO_INCREMENT,
  cd INT,

  CONSTRAINT pk_test PRIMARY KEY (id)
);

## it's part of sakiai's schema
## actor, film, film_actor table with FK
create table mcve.film
(
    film_id              int unsigned auto_increment primary key,
    title                varchar(255)                                                            not null,
    description          text                                                                    null,
    release_year         year                                                                    null,
    language_id          int unsigned                                                            not null,
    original_language_id int unsigned                                                            null,
    rental_duration      tinyint unsigned                        default 3                       not null,
    rental_rate          decimal(4, 2)                           default 4.99                    not null,
    length               smallint unsigned                                                       null,
    replacement_cost     decimal(5, 2)                           default 19.99                   not null,
    rating               enum ('G', 'PG', 'PG-13', 'R', 'NC-17') default 'G'                     null,
    special_features     set ('Trailers', 'Commentaries', 'Deleted Scenes', 'Behind the Scenes') null,
    last_update          timestamp                               default CURRENT_TIMESTAMP       not null on update CURRENT_TIMESTAMP
);

create table mcve.actor
(
    actor_id    int unsigned auto_increment primary key,
    first_name  varchar(45)                         not null,
    last_name   varchar(45)                         not null,
    last_update timestamp default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP
);

create table mcve.film_actor
(
    actor_id    int unsigned                        not null,
    film_id     int unsigned                        not null,
    last_update timestamp default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP,
    primary key (actor_id, film_id),
    constraint fk_film_actor_actor foreign key (actor_id) references actor (actor_id) on update cascade,
    constraint fk_film_actor_film foreign key (film_id) references film (film_id) on update cascade
);


## seed data
insert into mcve.actor (actor_id, first_name, last_name, last_update)
values (1, 'PENELOPE', 'GUINESS', '2006-02-15 04:34:33'),
       (2, 'NICK', 'WAHLBERG', '2006-02-15 04:34:33');

insert into mcve.film (film_id, title, description, release_year, language_id, original_language_id, rental_duration,
                  rental_rate, length, replacement_cost, rating, special_features, last_update)
values (1, 'ACADEMY DINOSAUR',
        'A Epic Drama of a Feminist And a Mad Scientist who must Battle a Teacher in The Canadian Rockies', 2006, 1,
        null, 6, 0.99, 86, 20.99, 'PG', 'Deleted Scenes,Behind the Scenes', '2006-02-15 05:03:42'),
       (23, 'ANACONDA CONFESSIONS',
        'A Lacklusture Display of a Dentist And a Dentist who must Fight a Girl in Australia', 2006, 1, null, 3, 0.99,
        92, 9.99, 'R', 'Trailers,Deleted Scenes', '2006-02-15 05:03:42'),
       (25, 'ANGELS LIFE', 'A Thoughtful Display of a Woman And a Astronaut who must Battle a Robot in Berlin', 2006, 1,
        null, 3, 2.99, 74, 15.99, 'G', 'Trailers', '2006-02-15 05:03:42'),
       (106, 'BULWORTH COMMANDMENTS',
        'A Amazing Display of a Mad Cow And a Pioneer who must Redeem a Sumo Wrestler in The Outback', 2006, 1, null, 4,
        2.99, 61, 14.99, 'G', 'Trailers', '2006-02-15 05:03:42'),
       (140, 'CHEAPER CLYDE',
        'A Emotional Character Study of a Pioneer And a Girl who must Discover a Dog in Ancient Japan', 2006, 1, null,
        6, 0.99, 87, 23.99, 'G', 'Trailers,Commentaries,Behind the Scenes', '2006-02-15 05:03:42');

insert into mcve.film_actor (actor_id, film_id, last_update)
values (1, 1, '2006-02-15 05:05:03'),
       (1, 23, '2006-02-15 05:05:03'),
       (1, 25, '2006-02-15 05:05:03'),
       (1, 106, '2006-02-15 05:05:03'),
       (1, 140, '2006-02-15 05:05:03');
